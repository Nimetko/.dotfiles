# setup: ln -s ~/x/.dotfiles/.tmux.conf ~/.tmux.conf

set -ga terminal-overrides ",screen-256color*:Tc"
set-option -g default-terminal "screen-256color"
set -s escape-time 0
set -g mouse on


# ---- Codex bell logic START --------
# bells
set -g visual-bell off
set -g monitor-bell on
set -g bell-action any

# ---- Codex bell logic END --------


# get rid of right side of status bar
# set-option -g status-right ''

# display only time nad date
# set -g status-right "%H:%M %d-%b-%y"
set -g status-right "%a %d %b  %H:%M "


set-window-option -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
# bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'xclip -in -selection clipboard'
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'


bind r source-file ~/.tmux.conf \; display ".tmux.conf reloaded"

# bind-key x kill-pane # kill without prompt

set -g base-index 1

# bind-key -r l last-window

# vim-like pane switching
# bind -r k select-pane -U
# bind -r j select-pane -D
# bind -r h select-pane -L
# bind -r l select-pane -R

# change leader key from C-b to C-a
unbind C-b
set -g prefix C-a
bind C-a send-prefix
set -g status-style 'bg=#333333 fg=#5eacd3'

bind-key b break-pane

set-option -g display-time 3000  # Display time in milliseconds (3000 ms = 3 seconds)
bind a display-message "Happy Birthday!"
# bind a display-popup -E 'printf "Happy Birthday!\n\nPress any key to close."'

bind-key J command-prompt -p "Join pane from:" "join-pane -s '%%'"

# join pain vertically
bind-key v command-prompt -p "Join pane from:" "join-pane -s '%%' -h"

# move to another session
bind-key s command-prompt -p "Move to session:" "switch-client -t '%%'"

# move to previous client
# bind-key P switch-client -p

# bind-key P switch-client run-shell 'tmux neww ~/x/scripts/personal.sh'

# move to next client
bind-key N switch-client -n

# switch to the last session
bind o switch-client -l

# tmux-cht
bind-key -r i run-shell "tmux neww ~/x/scripts/tmux-ch.sh"
# bind-key -r I run-shell "tmux neww bash less ~/x/personal/cheatsheet.txt"
bind-key -r I run-shell "tmux neww bash ~/x/scripts/show_cheatsheet.sh"

# tmux-todo-finder
# bind-key -r T run-shell "tmux neww ~/x/scripts/open-todo-in-tmux.sh"
bind-key -r m run-shell "tmux neww ~/x/scripts/tmux-personal-v2.sh movievocab.md"

# tmux-personal
bind-key -r P run-shell "tmux neww ~/x/scripts/tmux-personal-v2.sh legoTodoTickets"

# job
bind-key -r O run-shell "tmux neww ~/x/scripts/tmux-personal-v2.sh job.md"

# tmux cheat sheet
bind-key -r U run-shell "tmux neww ~/x/scripts/tmux-personal-v2.sh cheatsheet.txt"

# tmux Music
bind-key -r S run-shell "tmux neww bash ~/x/scripts/start_music.sh"

# Timer
# bind-key -r T run-shell "tmux neww bash ~/x/scripts/valut-project-timer-terminal/timer-3-1.sh"
bind-key -r T run-shell "tmux neww bash -c '~/x/scripts/valut-project-timer-terminal/timer-3-1.sh'"


# tmux-sessionizer
bind-key -r f run-shell "tmux neww ~/x/scripts/tmux-sessionizer"

# tmux-sessionizer for AI
# bind-key -r A run-shell "tmux neww ~/x/scripts/tmux-sessionizer ~/Projects/AI"

bind-key -r Y run-shell "tmux neww yazi"

# tmux-sessionizer for subtitles teacher
# bind-key -r S run-shell "tmux neww ~/x/scripts/tmux-sessionizer ~/Projects/subtitles_teacher_api/api"

# tmux-sessionizer for Movie Vocab
bind-key -r M run-shell "tmux neww ~/x/scripts/tmux-sessionizer ~/Projects/movie_vocab"
bind-key -r A run-shell "tmux neww ~/x/scripts/tmux-sessionizer ~/Projects/movie_vocab/api"
bind-key -r W run-shell "tmux neww ~/x/scripts/tmux-sessionizer ~/Projects/movie_vocab/web"

# Make :Codex run your script
set -g command-alias[0] "Codex=run-shell '~/x/scripts/tmux-reset-session-to-codex.sh'"

# Optional: case-insensitive convenience
set -g command-alias[1] "codex=run-shell '~/x/scripts/tmux-reset-session-to-codex.sh'"
set -g command-alias[2] "CODEX=run-shell '~/x/scripts/tmux-reset-session-to-codex.sh'"

# Zen mode - hide status bar
bind-key -r Z run-shell "tmux neww ~/x/scripts/toggleTmuxStatusBarVisibility.sh"
# bind-key z if-shell "[ \"\$(tmux show -g status)\" = \"status on\" ]" \
#   "set -g status off" \
#   "set -g status on"


# tmux AI stuff
bind a display-message "Happy Birthday!"

# Sound hook (default ON)
set-hook -g session-window-changed "run-shell '/Users/jabo/x/scripts/tmux-window-sound.sh \"#{window_name}\"'"

# codex-sound-on: set hook (ONE argument to run-shell)
set -g command-alias[3] \
  "codex-sound-on=set-hook -g session-window-changed \
  \"run-shell '/Users/jabo/x/scripts/tmux-window-sound.sh \\\"#{window_name}\\\"'\""


# codex-sound-off: no-op hook
set -g command-alias[4] "codex-sound-off=set-hook -g session-window-changed \"run-shell 'true'\""

